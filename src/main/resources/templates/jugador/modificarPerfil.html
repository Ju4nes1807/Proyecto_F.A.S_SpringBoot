<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/images/Logo.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Modificar Perfil - Jugador</title>
</head>

<body class="d-flex flex-column min-vh-100">
    <div class="navbar navbar-expand bg-primary lg-4 shadow">
        <a th:href="@{/jugador/dashboard}">
            <img src="/images/Logo.png" alt="Logo" class="img-fluid me-2" style="width: 75px; height: 75px;">
        </a>
        <p class="navbar-brand text-light fs-2 shadow">F.A.S</p>
        <div class="collapse navbar-collapse" id="navNavbarDropdown">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a th:href="@{/jugador/dashboard}" class="nav-link text-light shadow">Regresar</a>
                </li>
                <li class="nav-item">
                    <form th:action="@{/logout}" method="post">
                        <button type="submit" class="nav-link text-light shadow btn btn-link">Cerrar sesión</button>
                    </form>
                </li>
            </ul>
        </div>
    </div>

    <div class="container flex-grow-1">
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 col-lg-6">
                <h3 class="mt-5 shadow-sm p-2">Edita Mi Perfil</h3>

                <div th:if="${status}" class="alert alert-success mt-3" th:text="${status}">
                    ¡Perfil actualizado correctamente!
                </div>
                <div th:if="${error}" class="alert alert-danger mt-3" th:text="${error}">
                    Ocurrió un error al actualizar el perfil.
                </div>

                <form th:action="@{/jugador/perfil/update}" method="post" th:object="${user}">

                    <div class="mb-3">
                        <label for="nombres" class="form-label">Nombres:</label>
                        <input type="text" id="nombres" th:field="*{nombres}" placeholder="Nombre completo"
                            class="form-control" required />
                        <p th:if="${#fields.hasErrors('nombres')}" class="text-danger" th:errors="*{nombres}">Error</p>
                    </div>

                    <div class="mb-3">
                        <label for="apellidos" class="form-label">Apellidos:</label>
                        <input type="text" id="apellidos" th:field="*{apellidos}" placeholder="Apellidos completos"
                            class="form-control" required />
                        <p th:if="${#fields.hasErrors('apellidos')}" class="text-danger" th:errors="*{apellidos}">Error
                        </p>
                    </div>

                    <div class="mb-3">
                        <label for="numDocumento" class="form-label">Número de documento:</label>
                        <input type="number" id="numDocumento" th:field="*{numDocumento}"
                            placeholder="Número de documento" class="form-control" required />
                        <p th:if="${#fields.hasErrors('numDocumento')}" class="text-danger" th:errors="*{numDocumento}">
                            Error</p>
                    </div>

                    <div class="mb-3">
                        <label for="email" class="form-label">Correo electrónico:</label>
                        <input type="email" id="email" th:field="*{email}" placeholder="Correo electrónico"
                            class="form-control" required />
                        <p th:if="${#fields.hasErrors('email')}" class="text-danger" th:errors="*{email}">Error</p>
                    </div>

                    <div class="mb-3">
                        <label for="fechaNacimiento" class="form-label">Fecha de nacimiento</label>
                        <input type="date" id="fechaNacimiento" name="fechaNacimiento"
                            th:value="${user.fechaNacimiento}?: ''" class="form-control" required />
                    </div>

                    <div class="mb-3">
                        <label for="telefono" class="form-label">Teléfono:</label>
                        <input type="number" id="telefono" th:field="*{telefono}" placeholder="Teléfono"
                            class="form-control" required />
                        <p th:if="${#fields.hasErrors('telefono')}" class="text-danger" th:errors="*{telefono}">Error
                        </p>
                    </div>

                    <hr class="my-4">
                    <h5>Cambiar Contraseña (Opcional)</h5>

                    <div class="mb-3">
                        <label for="password_actual" class="form-label">Contraseña actual</label>
                        <input type="password" id="password_actual" name="password_actual"
                            placeholder="Deja en blanco si no deseas cambiarla" class="form-control" />
                    </div>

                    <div class="mb-3">
                        <label for="password_nueva" class="form-label">Contraseña nueva</label>
                        <input type="password" id="password_nueva" name="password_nueva" placeholder="Contraseña nueva"
                            class="form-control" />
                    </div>

                    <div class="text-center mt-4 mb-3">
                        <button type="submit" class="btn btn-primary">Actualizar perfil</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer class="bg-warning py-3 shadow mt-auto">
        <div class="container text-start d-flex align-items-center shadow">
            <img src="/images/Logo.png" alt="Logo" class="img-fluid me-2" style="width: 75px; height: 75px;">
            <p class="text-dark m-0">© Football Association System. Todos los derechos reservados</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>